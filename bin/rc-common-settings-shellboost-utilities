# Hey Emacs, this is a -*- sh -*- file ...
# NOTE: This file is meant to be sourced (e.g. from .bashrc or .zshrc)

# BSD sysexits.h codes.
EX_USAGE=64                             # Command-line usage error.

# Detect if the script is being sourced (Bash or Zsh compatible).
if [ -n "${ZSH_EVAL_CONTEXT:-}" ]; then
    if [[ "$ZSH_EVAL_CONTEXT" != *:file ]]; then
        printf >&2 "Error: This script must be sourced. Use 'source $0' or '. $0'.\n"
        return $EX_USAGE
    fi
elif [ -n "${BASH_SOURCE:-}" ]; then
    if [[ "${BASH_SOURCE[0]}" == "$0" ]]; then
        printf >&2 "Error: This script must be sourced. Use 'source $0' or '. $0'.\n"
        return $EX_USAGE
    fi
else
    printf >&2 "Error: Unable to determine shell sourcing context.\n"
    return $EX_USAGE
fi

# Add ~/winbin to PATH if not already present.
if [[ ":$PATH:" != *":$HOME/winbin:"* ]]; then
    export PATH="$HOME/winbin:$PATH";
fi

# Run a command repeatedly until it succeeds.
alias retry='run-until-success'
